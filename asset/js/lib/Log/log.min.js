/**
 * jsDump
 * Copyright (c) 2008 Ariel Flesler - aflesler(at)gmail(dot)com | http://flesler.blogspot.com
 * Licensed under BSD (http://www.opensource.org/licenses/bsd-license.php)
 * Date: 5/15/2008
 * @projectDescription Advanced and extensible data dumping for Javascript.
 * @version 1.0.0
 * @author Ariel Flesler
 */

var Delegator={subscribers:{},listen:function(e,t,n){document.attachEvent&&(t=="focus"?t="focusin":t=="blur"&&(t="focusout")),t in Delegator.subscribers||(document.addEventListener?document.addEventListener(t,Delegator.handler(t),!0):document.attachEvent("on"+t,Delegator.handler(t)),Delegator.subscribers[t]=[]);var r=e.split(/\s*,\s*/);for(var i=0,s=r.length;i<s;i++)Delegator.subscribers[t].push({rule:r[i],handler:n})},handler:function(e){return function(t){Delegator.dispatch(e,t||window.event)}},dispatch:function(e,t){var n=t.target||t.srcElement,r=Delegator.subscribers[e],i=r.length,s=[];while(n){try{var o={id:n.id,className:n.className,tagName:n.tagName}}catch(u){return}for(var a=0;a<i;a++){var f=r[a];f.compiled||(f.compiled=Delegator.compile(f.rule));var l=typeof s[a]=="undefined"?s[a]={index:f.compiled.length-1}:s[a];if(l.index<0)continue;var c=f.compiled[l.index];(!c.id||c.id==o.id)&&(!c.tagName||c.tagName==o.tagName)&&(c.className.length===0||Delegator.matchClasses(o.className,c.className))&&(--l.index,l.node||(l.node=n),l.index==-1&&f.handler.call(l.node,t))}n=n.parentNode}},regexpCache:{},matchClasses:function(e,t){for(var n=0,r=t.length;n<r;n++){var i="(?:^|\\s+)"+t[n]+"(?:\\s+|$)";Delegator.regexpCache[i]||(Delegator.regexpCache[i]=new RegExp(i));if(!Delegator.regexpCache[i].test(e))return!1}return!0},compile:function(e){var t=Delegator.split(e),n=[],r;for(var i=0,s=t.length;i<s;i++){var o=t[i];r||(r={tagName:null,id:null,className:[]});switch(o){case"":break;case"#":r.id=t[++i];break;case".":r.className.push(t[++i]);break;case" ":n.push(r),r=null;break;default:r.tagName=o.toUpperCase()}}return r&&n.push(r),n},_compliantCG:/()??/.exec("")[1]===undefined,split:function(e){var t=/(#|\.| )/g,n=/^(#|\.| )$(?!\s)/g,r=[],i=0,s,o,u;while(s=t.exec(e))o=s.index+s[0].length,o>i&&(r.push(e.slice(i,s.index)),!Delegator._compliantCG&&s.length>1&&s[0].replace(n,function(){for(var e=1;e<arguments.length-2;e++)arguments[e]===undefined&&(s[e]=undefined)}),s.length>1&&s.index<e.length&&Array.prototype.push.apply(r,s.slice(1)),u=s[0].length,i=o),t.lastIndex===s.index&&t.lastIndex++;return i===e.length?(!t.test("")||u)&&r.push(""):r.push(e.slice(i)),r}};define("delegator.js",function(){}),function(){function e(e){return'"'+e.toString().replace(/"/g,'\\"')+'"'}function t(e){return e+""}function n(e,t,n){var r=jsDump.separator(),i=jsDump.indent();return inner=jsDump.indent(1),t.join&&(t=t.join(","+r+inner)),t?[e,inner+t,i+n].join(r):e+n}function r(e){var t=e.length,r=Array(t);this.up();while(t--)r[t]=this.parse(e[t]);return this.down(),n("[",r,"]")}var i=/^function (\w+)/;window.jsDump={MAXDEPTH:5,parse:function(e,t){var n=this.parsers[t||this.typeOf(e)];return t=typeof n,t=="function"?n.call(this,e):t=="string"?n:this.parsers.error},typeOf:function(e){var t=typeof e,n="function",r=function(t){var n=!1;try{n=e[t]}catch(r){}return n};return t!="object"&&t!=n?t:e?r("exec")?"regexp":r("getHours")?"date":r("scrollBy")?"window":r("nodeName")=="#document"?"document":r("nodeName")?"node":r("item")?"nodelist":r("callee")?"arguments":r("call")||r("constructor")!=Array&&(e+"").indexOf(n)!=-1?n:"length"in e?"array":t:"null"},separator:function(){return this.multiline?this.HTML?"<br />":"\n":this.HTML?"&nbsp;":" "},indent:function(e){if(!this.multiline)return"";var t=this.indentChar;return this.HTML&&(t=t.replace(/\t/g,"   ").replace(/ /g,"&nbsp;")),Array(this._depth_+(e||0)).join(t)},up:function(e){this._depth_+=e||1},down:function(e){this._depth_-=e||1},setParser:function(e,t){this.parsers[e]=t},quote:e,literal:t,join:n,_depth_:1,parsers:{window:"[Window]",document:"[Document]",error:"[ERROR]",unknown:"[Unknown]","null":"null","undefined":"undefined","function":function(e){var t="function",r="name"in e?e.name:(i.exec(e)||[])[1];return r&&(t+=" "+r),t+="(",t=[t,this.parse(e,"functionArgs"),"){"].join(""),n(t,this.parse(e,"functionCode"),"}")},array:r,nodelist:r,arguments:r,object:function(e){var t=[];this.up();if(this._depth_<jsDump.MAXDEPTH)for(var r in e)t.push(this.parse(r,"key")+": "+this.parse(e[r]));return this.down(),n("{",t,"}")},node:function(e){var t=this.HTML?"&lt;":"<",n=this.HTML?"&gt;":">",r=e.nodeName.toLowerCase(),i=t+r;for(var s in this.DOMAttrs){var o=e[this.DOMAttrs[s]];o&&(i+=" "+s+"="+this.parse(o,"attribute"))}return i+n+t+"/"+r+n},functionArgs:function(e){var t=e.length;if(!t)return"";var n=Array(t);while(t--)n[t]=String.fromCharCode(97+t);return" "+n.join(", ")+" "},key:e,functionCode:"[code]",attribute:e,string:e,date:e,regexp:t,number:t,"boolean":t},DOMAttrs:{id:"id",name:"name","class":"className"},HTML:!1,indentChar:"   ",multiline:!0}}(),define("jsDump-1.0.0.js",function(){});var Log={levels:["error","info","debug","fine"],root:null,count:0,impl:function(e){return function(){Log.write(e,Array.prototype.slice.apply(arguments))}},write:function(e,t){if(e>Log.level)return;var n=Log.levels[e],r=t.shift(),i=console[n];typeof i==typeof setTimeout?i.call(console,n,r,t):console.log(n,r,t);if(!Log.root)return;bd=Log.dumpArray(t),Log.writeHTML(e,r,bd)},dumpArray:function(e){var t="";for(var n=0,r=e.length;n<r;n++)t&&(t+="<hr>"),t+=jsDump.parse(e[n]);return t},writeHTML:function(e,t,n){var r=document.createElement("div");r.className="log-entry log-"+Log.levels[e],r.innerHTML=Log.genBare(t,n),Log.root.insertBefore(r,Log.root.firstChild)},genBare:function(e,t){return'<div class="hd"><span class="toggle">&#9658;</span> <span class="count">'+ ++Log.count+"</span> "+e+"</div>"+(t?'<div class="bd" style="display: none;">'+t+"</div>":"")},genHTML:function(e,t){return'<div class="log-entry">'+Log.genBare(e,t)+"</div>"},clear:function(){Log.root.innerHTML="",Log.count=0},getLevel:function(e){for(var t=0,n=Log.levels.length;t<n;t++)if(e==Log.levels[t])return t;return n},init:function(e,t){jsDump.HTML=!0,Log.level=Log.getLevel(t);for(var n=0,r=Log.levels.length;n<r;n++){var i=Log.levels[n];Log[i]=Log.impl(n),Log[i].bind=function(e){var t=this;return function(){var n=Array.prototype.slice.apply(arguments);n.unshift(e),t.apply(null,n)}}}Log.error=Log.error,Log.info=Log.info,Log.debug=Log.debug,Log.fine=Log.fine,Log.root=e||null,e&&(e.style.height=(window.innerHeight||document.documentElement.clientHeight)+"px",Delegator.listen(".log-entry .toggle","click",function(){try{var e=this.parentNode.nextSibling.style;e.display=="none"?(e.display="block",this.innerHTML="&#9660;"):(e.display="none",this.innerHTML="&#9658;")}catch(t){}}))}};define("log.js",function(){}),require(["delegator.js","jsDump-1.0.0.js","log.js"],function(){}),define("main",function(){});